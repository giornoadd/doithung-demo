<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Doi Tung Finance | LINE OA Prototype</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Sarabun:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Sarabun', 'Inter', 'system-ui', 'sans-serif']
                    },
                    colors: {
                        lineGreen: '#06C755',
                        lineHeader: '#06C755',
                        lineChatBg: '#F0F2F5',
                        lineUser: '#CFF6A1'
                    }
                }
            }
        };
    </script>
    <style>
        :root {
            color-scheme: light;
        }

        body {
            background-color: #c7d3dd;
            overflow: hidden;
        }

        .chat-wallpaper {
            background: radial-gradient(circle at 12% 18%, rgba(255, 255, 255, 0.34) 0, rgba(255, 255, 255, 0.05) 42%),
                        radial-gradient(circle at 88% 12%, rgba(255, 255, 255, 0.35) 0, rgba(255, 255, 255, 0) 45%),
                        #f0f2f5;
        }

        .chat-bubble {
            position: relative;
            border-radius: 20px;
            padding: 12px 16px;
            max-width: calc(100% - 72px);
            box-shadow: 0 3px 10px rgba(14, 30, 37, 0.08);
        }

        .bubble-left::before {
            content: '';
            position: absolute;
            bottom: -1px;
            left: -7px;
            width: 14px;
            height: 14px;
            background: inherit;
            border-bottom-right-radius: 10px;
        }

        .bubble-left::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: -12px;
            width: 12px;
            height: 12px;
            background: transparent;
            border-bottom-right-radius: 12px;
            box-shadow: 2px 4px 0 0 rgba(255, 255, 255, 1);
        }

        .bubble-right {
            background: #CFF6A1;
            color: #0f172a;
        }

        .bubble-right::before {
            content: '';
            position: absolute;
            bottom: -1px;
            right: -7px;
            width: 14px;
            height: 14px;
            background: inherit;
            border-bottom-left-radius: 10px;
        }

        .bubble-right::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: -12px;
            width: 12px;
            height: 12px;
            background: transparent;
            border-bottom-left-radius: 12px;
            box-shadow: -2px 4px 0 0 rgba(207, 246, 161, 1);
        }

        .status-bar-dot {
            width: 6px;
            height: 6px;
            border-radius: 9999px;
        }

        .shadow-soft {
            box-shadow: 0 12px 30px rgba(15, 30, 45, 0.18);
        }

        .animate-fade-in {
            animation: fadeIn 220ms ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body class="font-sans antialiased text-slate-900">
    <div id="line-oa-home-view" class="relative mx-auto h-screen w-full max-w-sm">
        <div class="fixed inset-x-0 top-0 flex justify-center z-30">
            <div class="w-full max-w-sm bg-lineHeader text-white px-4 pt-5 pb-3">
                <div class="flex items-center justify-between text-xs font-medium tracking-wide opacity-90">
                    <span>09:41</span>
                    <div class="flex items-center gap-2">
                        <span class="status-bar-dot bg-white/90"></span>
                        <span class="status-bar-dot bg-white/90"></span>
                        <span class="status-bar-dot bg-white/90"></span>
                    </div>
                </div>
                <div class="mt-3 flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="inline-flex h-10 w-10 items-center justify-center text-white/90">
                            <svg class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                                <path d="M15 6l-6 6 6 6" />
                            </svg>
                        </div>
                        <div>
                            <h1 class="text-lg font-semibold leading-none">Doi Tung Finance</h1>
                            <p class="mt-1 text-xs text-white/80">LINE Official Account</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-2 text-white/90">
                        <div class="inline-flex h-10 w-10 items-center justify-center" aria-hidden="true">
                            <svg class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                                <circle cx="11" cy="11" r="7" />
                                <line x1="16.65" y1="16.65" x2="21" y2="21" />
                            </svg>
                        </div>
                        <div class="inline-flex h-10 w-10 items-center justify-center" aria-hidden="true">
                            <svg class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                                <line x1="3" y1="12" x2="21" y2="12" />
                                <line x1="3" y1="6" x2="21" y2="6" />
                                <line x1="3" y1="18" x2="21" y2="18" />
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <main class="relative h-full bg-lineChatBg">
            <div class="chat-wallpaper absolute inset-0"></div>
            <div class="relative flex h-full flex-col px-4 pt-32 pb-56">
                <div class="flex items-start gap-3 animate-fade-in">
                    <div class="mt-1 flex h-10 w-10 items-center justify-center rounded-full bg-lineGreen text-sm font-semibold text-white">DT</div>
                    <div class="chat-bubble bubble-left bg-white text-sm leading-relaxed text-slate-800">
                        ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! üôè ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ö‡∏¥‡∏Å‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î‡∏¢‡πà‡∏≠‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á (Rich Menu) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‚¨áÔ∏è
                    </div>
                </div>
                <span class="ml-16 mt-1 text-xs text-slate-500">‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß 09:40</span>
            </div>
        </main>

        <div class="fixed bottom-0 left-0 right-0 z-30 flex justify-center pb-5">
            <div class="w-full max-w-sm px-4">
                <div class="rounded-3xl shadow-soft">
                    <div class="grid grid-cols-2 gap-px bg-gray-400">
                        <button onclick="startChatFlow()" class="aspect-square bg-white flex flex-col items-center justify-center gap-3 px-4 text-center transition-transform duration-200 ease-out hover:scale-[1.02]">
                            <span class="inline-flex h-14 w-14 items-center justify-center rounded-2xl bg-[#e7f7ec]">
                                <svg class="h-8 w-8 text-lineGreen" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                                    <path d="M21 15V8a2 2 0 0 0-2-2h-3.17a2 2 0 0 1-1.41-.59l-.83-.83A2 2 0 0 0 12.17 4H11a2 2 0 0 0-2 2v9" />
                                    <rect x="3" y="12" width="18" height="8" rx="2" />
                                    <path d="M9 16h6" />
                                    <path d="M12 13v6" />
                                </svg>
                            </span>
                            <span class="text-sm font-semibold text-slate-800">‡∏™‡πà‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à (‡πÄ‡∏ö‡∏¥‡∏Å‡πÄ‡∏á‡∏¥‡∏ô)</span>
                            <span class="text-xs font-medium uppercase tracking-wide text-lineGreen">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</span>
                        </button>
                        <button onclick="showDemoAlert(event)" class="aspect-square bg-white flex flex-col items-center justify-center gap-3 px-4 text-center transition-transform duration-200 ease-out hover:scale-[1.02]">
                            <span class="inline-flex h-14 w-14 items-center justify-center rounded-2xl bg-[#eef2f7]">
                                <svg class="h-8 w-8 text-slate-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                                    <circle cx="11" cy="11" r="8" />
                                    <line x1="21" y1="21" x2="16.65" y2="16.65" />
                                    <path d="M11 8v3l2 2" />
                                </svg>
                            </span>
                            <span class="text-sm font-semibold text-slate-700">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</span>
                            <span class="text-xs font-medium uppercase tracking-wide text-slate-400">Demo</span>
                        </button>
                        <button onclick="showDemoAlert(event)" class="aspect-square bg-white flex flex-col items-center justify-center gap-3 px-4 text-center transition-transform duration-200 ease-out hover:scale-[1.02]">
                            <span class="inline-flex h-14 w-14 items-center justify-center rounded-2xl bg-[#eef2f7]">
                                <svg class="h-8 w-8 text-slate-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" />
                                    <path d="M20 14v7H6.5A2.5 2.5 0 0 1 4 18.5V5.5A2.5 2.5 0 0 1 6.5 3H12" />
                                    <path d="M8 7h6" />
                                    <path d="M8 11h8" />
                                    <path d="M16 5l5 5" />
                                    <path d="M21 3v5h-5" />
                                </svg>
                            </span>
                            <span class="text-sm font-semibold text-slate-700">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏¥‡∏Å</span>
                            <span class="text-xs font-medium uppercase tracking-wide text-slate-400">Demo</span>
                        </button>
                        <button onclick="showDemoAlert(event)" class="aspect-square bg-white flex flex-col items-center justify-center gap-3 px-4 text-center transition-transform duration-200 ease-out hover:scale-[1.02]">
                            <span class="inline-flex h-14 w-14 items-center justify-center rounded-2xl bg-[#eef2f7]">
                                <svg class="h-8 w-8 text-slate-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                                    <circle cx="12" cy="12" r="10" />
                                    <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" />
                                    <path d="M12 17h.01" />
                                </svg>
                            </span>
                            <span class="text-sm font-semibold text-slate-700">FAQ</span>
                            <span class="text-xs font-medium uppercase tracking-wide text-slate-400">Demo</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="chat-flow-view" class="relative mx-auto hidden h-screen w-full max-w-sm">
        <div class="fixed inset-x-0 top-0 flex justify-center z-40">
            <div class="w-full max-w-sm bg-lineHeader text-white px-4 pt-5 pb-3">
                <div class="flex items-center justify-between text-xs font-medium tracking-wide opacity-90">
                    <span>09:42</span>
                    <div class="flex items-center gap-2">
                        <span class="status-bar-dot bg-white/90"></span>
                        <span class="status-bar-dot bg-white/90"></span>
                        <span class="status-bar-dot bg-white/90"></span>
                    </div>
                </div>
                <div class="mt-3 flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <button type="button" onclick="goBackToHome()" class="inline-flex h-10 w-10 items-center justify-center text-white/90" aria-label="‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö">
                            <svg class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                                <path d="M15 6l-6 6 6 6" />
                            </svg>
                        </button>
                        <div class="flex items-center gap-3">
                            <div class="bg-white rounded-full w-10 h-10 flex items-center justify-center text-lineGreen font-semibold text-sm">DT</div>
                            <div>
                                <h2 class="text-lg font-semibold leading-none">Doi Tung Finance</h2>
                                <p class="mt-1 text-xs text-white/80">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö</p>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-center gap-2 text-white/90">
                        <div class="inline-flex h-10 w-10 items-center justify-center" aria-hidden="true">
                            <svg class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                                <circle cx="11" cy="11" r="7" />
                                <line x1="16.65" y1="16.65" x2="21" y2="21" />
                            </svg>
                        </div>
                        <div class="inline-flex h-10 w-10 items-center justify-center" aria-hidden="true">
                            <svg class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.12.9.37 1.79.72 2.63a2 2 0 0 1-.45 2.11L8 9a16 16 0 0 0 7 7l.54-.38a2 2 0 0 1 2.11-.45 12.29 12.29 0 0 0 2.63.72A2 2 0 0 1 22 16.92Z" />
                            </svg>
                        </div>
                        <div class="inline-flex h-10 w-10 items-center justify-center" aria-hidden="true">
                            <svg class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                                <line x1="3" y1="12" x2="21" y2="12" />
                                <line x1="3" y1="6" x2="21" y2="6" />
                                <line x1="3" y1="18" x2="21" y2="18" />
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="relative flex h-full flex-col bg-lineChatBg">
            <div class="chat-wallpaper absolute inset-0"></div>
            <div class="relative flex h-full flex-col pt-32 pb-36">
                <div id="chat-body-messages" class="flex-1 overflow-y-auto px-4">
                    <!-- Messages injected via JS -->
                </div>
                <div id="quick-reply-container" class="px-4 pb-4 pt-2 hidden">
                    <!-- Quick replies injected via JS -->
                </div>
            </div>
        </div>

        <div class="fixed inset-x-0 bottom-0 flex justify-center pb-4 z-40">
            <div class="w-full max-w-sm px-4">
                <div class="flex items-end gap-2 rounded-3xl bg-white px-3 py-2 shadow-md">
                    <button id="camera-trigger" type="button" onclick="triggerReceiptUpload()" class="inline-flex h-10 w-10 items-center justify-center text-slate-600 transition-colors duration-150">
                        <svg class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                            <path d="M3 9a2 2 0 0 1 2-2h1l2-3h6l2 3h1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z" />
                            <circle cx="12" cy="13" r="3" />
                        </svg>
                    </button>
                    <button type="button" class="inline-flex h-10 w-10 items-center justify-center text-slate-400" aria-hidden="true">
                        <svg class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                            <path d="M21.44 11.05l-9.19 9.19a2 2 0 0 1-2.83 0L4.34 15.16a2 2 0 0 1 0-2.83l9.19-9.19a2 2 0 0 1 2.83 0l5.08 5.08a2 2 0 0 1 0 2.83Z" />
                            <path d="M7 7l10 10" />
                        </svg>
                    </button>
                    <div class="flex-1">
                        <div class="rounded-full bg-slate-100 px-4 py-2 text-left text-sm text-slate-500">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</div>
                    </div>
                    <button type="button" class="inline-flex h-10 w-10 items-center justify-center text-slate-400" aria-hidden="true">
                        <svg class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                            <path d="M14.828 14.828a4 4 0 1 1 5.657 5.657 4 4 0 0 1-5.657-5.657Z" />
                            <path d="M9 10h.01" />
                            <path d="M15 10h.01" />
                        </svg>
                    </button>
                    <button type="button" class="inline-flex h-10 w-10 items-center justify-center text-lineGreen" aria-hidden="true">
                        <svg class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                            <path d="M3 3h18" />
                            <path d="M8 21h8" />
                            <path d="M12 3v18" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="fixed top-4 right-4 z-50 flex gap-2">
        <a href="program-hub.html" class="rounded-full bg-[#006A4E] px-4 py-2 text-xs font-semibold text-white shadow-lg hover:bg-[#009688] transition">‚Üê Hub</a>
        <button type="button" onclick="location.reload()" class="rounded-full bg-slate-900/90 px-4 py-2 text-xs font-semibold text-white shadow-lg hover:bg-slate-700 transition">üîÑ Restart</button>
    </div>

    <script>
        const homeView = document.getElementById('line-oa-home-view');
        const chatView = document.getElementById('chat-flow-view');
        const chatBody = document.getElementById('chat-body-messages');
        const quickReplyContainer = document.getElementById('quick-reply-container');
        const cameraTrigger = document.getElementById('camera-trigger');
        let activeTimeouts = [];

        function registerTimeout(callback, delay) {
            const id = window.setTimeout(() => {
                callback();
                activeTimeouts = activeTimeouts.filter(timerId => timerId !== id);
            }, delay);
            activeTimeouts.push(id);
            return id;
        }

        function clearAllTimeouts() {
            activeTimeouts.forEach(id => window.clearTimeout(id));
            activeTimeouts = [];
        }

        function showDemoAlert(event) {
            event.preventDefault();
            window.alert('‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô');
        }

        function setCameraEnabled(enabled) {
            if (!cameraTrigger) return;
            if (enabled) {
                cameraTrigger.classList.remove('opacity-40', 'pointer-events-none');
                cameraTrigger.setAttribute('aria-disabled', 'false');
            } else {
                cameraTrigger.classList.add('opacity-40', 'pointer-events-none');
                cameraTrigger.setAttribute('aria-disabled', 'true');
            }
        }

        function startChatFlow() {
            homeView.classList.add('hidden');
            chatView.classList.remove('hidden');
            initializeChat();
        }

        function goBackToHome() {
            clearAllTimeouts();
            homeView.classList.remove('hidden');
            chatView.classList.add('hidden');
            if (chatBody) {
                chatBody.innerHTML = '';
            }
            hideQuickReplies();
            setCameraEnabled(true);
        }

        function initializeChat() {
            clearAllTimeouts();
            if (chatBody) {
                chatBody.innerHTML = '';
            }
            hideQuickReplies();
            setCameraEnabled(false);
            addBotMessage('‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡πà‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à (PDF/JPG) ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö');
            registerTimeout(() => setCameraEnabled(true), 350);
        }

        function triggerReceiptUpload() {
            if (cameraTrigger.getAttribute('aria-disabled') === 'true') {
                return;
            }
            setCameraEnabled(false);
            addUserImage('demo-image/demo_0001.png');

            registerTimeout(() => {
                addBotMessage('‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏Ñ‡∏£‡∏±‡∏ö... ü§ñ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...');
            }, 1000);

            registerTimeout(() => {
                addProcessingIndicator();
            }, 1800);

            registerTimeout(() => {
                addBotMessage('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Voucher No. ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏ô‡∏µ‡πâ:');
                renderVoucherChoices();
            }, 3800);
        }

        function selectVoucher(voucherId) {
            hideQuickReplies();
            addUserMessage(`üìã ${voucherId}`);
            
            registerTimeout(() => {
                addBotMessage('‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏£‡∏±‡∏ö\n\n1) ‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à GrabExpress (Car)\n   ‚Ä¢ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: 07 ‡∏ï.‡∏Ñ. 25\n   ‚Ä¢ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô: CASHLESS\n   ‚Ä¢ ‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ (Item Carrying Fee) 340 ‡∏ö‡∏≤‡∏ó\n   ‚Ä¢ ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î (Rewards) -34 ‡∏ö‡∏≤‡∏ó\n   ‚áí ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏™‡∏∏‡∏ó‡∏ò‡∏¥: 306 ‡∏ö‡∏≤‡∏ó\n\n2) ‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏≤‡∏á‡∏û‡∏¥‡πÄ‡∏®‡∏© (‡∏Å‡∏≤‡∏£‡∏ó‡∏≤‡∏á‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÅ‡∏´‡πà‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢)\n   ‚Ä¢ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (‡∏à‡∏≤‡∏Å‡∏£‡∏≠‡∏¢‡πÄ‡∏à‡∏≤‡∏∞): 15 ‡∏Å.‡∏Ñ. 25\n   ‚Ä¢ ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏ñ: 4 ‡∏•‡πâ‡∏≠\n   ‚áí ‡∏£‡∏≤‡∏Ñ‡∏≤: 50 ‡∏ö‡∏≤‡∏ó');
            }, 1000);

            registerTimeout(() => {
                addBotMessage('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Account Code (‡∏£‡∏´‡∏±‡∏™‡∏ö‡∏±‡∏ç‡∏ä‡∏µ) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ:');
                renderAccountCodeChoices();
            }, 2500);
        }

        function selectAccountCode(accountCode, accountName) {
            hideQuickReplies();
            addUserMessage(`üí∞ ${accountCode} - ${accountName}`);
            
            registerTimeout(() => {
                addBotMessage('‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á:\n\nüìã Voucher: PV-BK-6910296\nüí∞ Account: ' + accountCode + ' - ' + accountName + '\nüíµ ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: 356 ‡∏ö‡∏≤‡∏ó');
            }, 1000);

            registerTimeout(() => {
                addBotMessage('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏° (Transaction Text) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö:');
            }, 1800);

            registerTimeout(() => {
                addUserMessage('281-‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡πÑ‡∏õ-‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏ô‡∏≤‡∏°‡∏ö‡∏¥‡∏ô/‡∏≠‡∏≠‡∏Å‡∏ö‡∏π‡∏ò 08-14/10/2025');
            }, 2600);

            registerTimeout(() => {
                addBotMessage('‚úÖ ‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:\n\nüìã Voucher: PV-BK-6910296\nüí∞ Account: ' + accountCode + ' - ' + accountName + '\nüíµ ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: 356 ‡∏ö‡∏≤‡∏ó\nüìù Transaction: 281-‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡πÑ‡∏õ-‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏ô‡∏≤‡∏°‡∏ö‡∏¥‡∏ô/‡∏≠‡∏≠‡∏Å‡∏ö‡∏π‡∏ò 08-14/10/2025\n\n‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?');
            }, 3400);

            registerTimeout(() => {
                addUserNote('üìù ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô ‡∏´‡∏≤‡∏Å‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‚ùå ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ');
                renderQuickReplies();
            }, 4200);
        }

        function addProcessingIndicator() {
            if (!chatBody) return;
            chatBody.insertAdjacentHTML('beforeend', `
                <div class="mt-4 flex items-end gap-3 animate-fade-in">
                    <div class="flex h-9 w-9 shrink-0 items-center justify-center rounded-full bg-lineGreen text-xs font-semibold text-white">DT</div>
                    <div class="chat-bubble bubble-left bg-white p-4 space-y-2">
                        <div class="text-xs font-semibold text-slate-600 uppercase tracking-wide">üîç AI Processing</div>
                        <div class="space-y-1">
                            <div class="flex items-center gap-2 text-xs text-slate-700">
                                <span class="text-emerald-600">‚úì</span>
                                <span>OCR Extraction</span>
                                <span class="ml-auto text-emerald-600 font-semibold">98%</span>
                            </div>
                            <div class="h-1 bg-slate-200 rounded-full overflow-hidden">
                                <div class="h-full bg-emerald-500 rounded-full transition-all duration-1000" style="width: 98%"></div>
                            </div>
                        </div>
                        <div class="space-y-1">
                            <div class="flex items-center gap-2 text-xs text-slate-700">
                                <span class="text-blue-600">‚ü≥</span>
                                <span>Policy Verification</span>
                                <span class="ml-auto text-blue-600 font-semibold">95%</span>
                            </div>
                            <div class="h-1 bg-slate-200 rounded-full overflow-hidden">
                                <div class="h-full bg-blue-500 rounded-full transition-all duration-1000" style="width: 95%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            `);
            scrollChatToBottom();
        }

        function triggerConfirm() {
            hideQuickReplies();
            addUserMessage('‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏∑‡∏ô');
            registerTimeout(() => {
                addBotMessage('‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! üöÄ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏¥‡∏Å‡∏à‡πà‡∏≤‡∏¢‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏†‡∏≤‡∏¢‡πÉ‡∏ï‡πâ voucher queue: PV-BK-6910296 ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£');
                setCameraEnabled(false);
            }, 1000);
        }

        function renderVoucherChoices() {
            if (!quickReplyContainer) return;
            quickReplyContainer.innerHTML = `
                <div class="flex flex-col gap-2">
                    <button type="button" onclick="selectVoucher('ADV-BK-6910008')" class="rounded-2xl bg-white border border-slate-200 px-4 py-3 text-left shadow-sm transition-all duration-150 hover:scale-[1.02] hover:border-lineGreen">
                        <div class="text-sm font-semibold text-slate-800">ADV-BK-6910008</div>
                        <div class="text-xs text-slate-500 mt-1">Clear Advance Voucher</div>
                    </button>
                    <button type="button" onclick="selectVoucher('ADV-BK-6910009')" class="rounded-2xl bg-white border border-slate-200 px-4 py-3 text-left shadow-sm transition-all duration-150 hover:scale-[1.02] hover:border-lineGreen">
                        <div class="text-sm font-semibold text-slate-800">ADV-BK-6910009</div>
                        <div class="text-xs text-slate-500 mt-1">Clear Advance Voucher</div>
                    </button>
                    <button type="button" onclick="selectVoucher('PV-BK-6910296')" class="rounded-2xl bg-white border-2 border-lineGreen px-4 py-3 text-left shadow-sm transition-all duration-150 hover:scale-[1.02]">
                        <div class="text-sm font-semibold text-slate-800">PV-BK-6910296</div>
                        <div class="text-xs text-emerald-600 mt-1">‚úì Payment Voucher (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)</div>
                    </button>
                </div>
            `;
            quickReplyContainer.classList.remove('hidden');
            scrollChatToBottom();
        }

        function renderAccountCodeChoices() {
            if (!quickReplyContainer) return;
            quickReplyContainer.innerHTML = `
                <div class="flex flex-col gap-2">
                    <button type="button" onclick="selectAccountCode('11211', 'Saving Accounts')" class="rounded-2xl bg-white border border-slate-200 px-4 py-3 text-left shadow-sm transition-all duration-150 hover:scale-[1.02] hover:border-lineGreen">
                        <div class="text-sm font-semibold text-slate-800">11211</div>
                        <div class="text-xs text-slate-500 mt-1">Saving Accounts (‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡∏ù‡∏≤‡∏Å‡∏≠‡∏≠‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå)</div>
                    </button>
                    <button type="button" onclick="selectAccountCode('52101', 'Transportation Expense')" class="rounded-2xl bg-white border-2 border-lineGreen px-4 py-3 text-left shadow-sm transition-all duration-150 hover:scale-[1.02]">
                        <div class="text-sm font-semibold text-slate-800">52101</div>
                        <div class="text-xs text-emerald-600 mt-1">‚úì Transportation Expense (‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á - ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)</div>
                    </button>
                    <button type="button" onclick="selectAccountCode('11902', 'Short-term advances to employees')" class="rounded-2xl bg-white border border-slate-200 px-4 py-3 text-left shadow-sm transition-all duration-150 hover:scale-[1.02] hover:border-lineGreen">
                        <div class="text-sm font-semibold text-slate-800">11902</div>
                        <div class="text-xs text-slate-500 mt-1">Short-term advances to employees (‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏ö‡∏¥‡∏Å‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤)</div>
                    </button>
                </div>
            `;
            quickReplyContainer.classList.remove('hidden');
            scrollChatToBottom();
        }

        function renderQuickReplies() {
            if (!quickReplyContainer) return;
            quickReplyContainer.innerHTML = `
                <div class="flex items-center justify-center gap-3">
                    <button id="btn-confirm" type="button" onclick="triggerConfirm()" class="rounded-full bg-lineGreen px-5 py-2 text-sm font-semibold text-white shadow-sm transition-transform duration-150 hover:scale-105">‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏∑‡∏ô</button>
                    <button id="btn-reject" type="button" onclick="showDemoAlert(event)" class="rounded-full border border-slate-300 px-5 py-2 text-sm font-semibold text-slate-600 transition-transform duration-150 hover:scale-105">‚ùå ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
            `;
            quickReplyContainer.classList.remove('hidden');
            scrollChatToBottom();
        }

        function hideQuickReplies() {
            if (!quickReplyContainer) return;
            quickReplyContainer.classList.add('hidden');
            quickReplyContainer.innerHTML = '';
        }

        function addBotMessage(text) {
            if (!chatBody) return;
            chatBody.insertAdjacentHTML('beforeend', `
                <div class="mt-4 flex items-end gap-3 animate-fade-in">
                    <div class="flex h-9 w-9 shrink-0 items-center justify-center rounded-full bg-lineGreen text-xs font-semibold text-white">DT</div>
                    <div class="chat-bubble bubble-left bg-white text-sm leading-relaxed text-slate-800 whitespace-pre-line">${text}</div>
                </div>
            `);
            scrollChatToBottom();
        }

        function addUserMessage(text) {
            if (!chatBody) return;
            chatBody.insertAdjacentHTML('beforeend', `
                <div class="mt-4 flex justify-end animate-fade-in">
                    <div class="chat-bubble bubble-right text-sm leading-relaxed whitespace-pre-line">${text}</div>
                </div>
            `);
            scrollChatToBottom();
        }

        function addUserImage(url) {
            if (!chatBody) return;
            chatBody.insertAdjacentHTML('beforeend', `
                <div class="mt-4 flex justify-end animate-fade-in">
                    <div class="chat-bubble bubble-right p-2">
                        <img src="${url}" alt="Receipt preview" class="max-w-[220px] rounded-xl shadow-md">
                    </div>
                </div>
            `);
            scrollChatToBottom();
        }

        function addUserNote(text) {
            if (!chatBody) return;
            chatBody.insertAdjacentHTML('beforeend', `
                <div class="mt-4 flex justify-center animate-fade-in">
                    <div class="max-w-[85%] rounded-xl bg-amber-50 border border-amber-200 px-4 py-3 text-xs leading-relaxed text-amber-900 shadow-sm">
                        ${text}
                    </div>
                </div>
            `);
            scrollChatToBottom();
        }

        function scrollChatToBottom() {
            if (!chatBody) return;
            requestAnimationFrame(() => {
                chatBody.scrollTop = chatBody.scrollHeight;
            });
        }
    </script>
</body>
</html>